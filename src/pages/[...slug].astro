---
import i18n, { getRoutesAndPages  } from '@/i18n'; // si uso '@/i18n/config' falla

export const [pages, routes] = await getRoutesAndPages(() => Astro.glob("../components/pages/*.astro"));

export async function getStaticPaths() {
  return routes;
}

export const prerender = true;

let { slug } : { slug: string | undefined} = Astro.params;

if (i18n.routing.prefixDefaultLocale && !slug) {
  return Astro.redirect(`/${i18n.defaultLocale}`);
}
// @ts-ignore
const CustomPage = pages.resolve(slug);
---
<CustomPage />
