---
import StreamerCard from "../components/StreamerCard.astro"
import palmares from "../../public/archivo-page/editions-info.json"
// ! la variable edicion es recibida desde ArchivoPage
interface Props {
  edicion: string
}

const { edicion } = Astro.props
let index = 3

let datosSeleccionados = palmares.find(
  (palmar) => palmar.edition === edicion
)

if (!datosSeleccionados) {
  return
}

const {
  comunidad1,
  comunidad2,
  finalista,
  foto1,
  foto2,
  ganador,
  streamers1,
  streamers2,
  total1,
  total2,
} = datosSeleccionados?.info[index]
---
<style>
  .button-palmar:hover {
  box-shadow: 0 0 10px 5px rgb(62, 159, 255);
  }
</style>
<section class="flex flex-col gap-4 pt-6 justify-center items-center mt-10 mb-20">
  <h1 class="text-6xl uppercase font-tomaso mb-5">Palmarés</h1>
  <div class="flex gap-44 h-fit justify-center items-center ">
    <div class="flex flex-col min-w-[500px] gap-1 ml-5">
      {
        palmares.map((item) => {
          if (item.edition === edicion) {
            return item.info.map((infoItem, i) => {
              const { categoria, ganador } = infoItem
              return (
                <button class="button-palmar" type="button">
                  <div
                    id={`${i + 1}`}
                    class={`alert flex justify-between rounded-sm  ${
                      i % 2 === 0 ? "bg-gradient-to-r from-blue-600 to-sky-400/45  " : "bg-gradient-to-r from-gray-700 to-blue-900"
                    } ${
                      index === i
                        ? "bg-blue-950 border border-sky-300 border-spacing-6"
                        : ""
                    } text-center hover:bg-blue-900 px-4 mb-1`}
                  >
                    <h1 class="text-xl">{categoria}</h1>
                    <strong>{ganador}</strong>
                  </div>
                </button>
              )
            })
          }
        })
      }
    </div>
    <div class="flex gap-3 items-end mt-20 mr-5">
      {
        ganador && (
          <StreamerCard
            position="º1"
            edicion={edicion}
            name={ganador}
            comunidad={comunidad1}
            streamers={streamers1}
            foto={foto1}
            total={total1}
            background={"bg-finalista"}
          />
        )
      }
      {
        finalista && (
          <StreamerCard
            position="º2"
            edicion={edicion}
            name={finalista}
            comunidad={comunidad2}
            streamers={streamers2}
            foto={foto2}
            total={total2}
            background={"bg-semifinalista"}
          />
        )
      }
    </div>
  </div>

  <script></script>
</section>
