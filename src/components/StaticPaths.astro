---
export const pages = Object.fromEntries(
  await Promise.all(
    Object.entries(
      import.meta.glob([
        "../components/pages/*.astro",
        "../components/cookies/Cookies.astro",
        "!../components/pages/App.astro" // evita error on build
      ])
    ).map(async ([entry, callback]: [string, Function]) => {
      const url = entry
        .replace("./pages/", "")
        .replace("./cookies/", "")
        .replace('.astro', "")
        .replace(".html", "")
        .toLowerCase();

      const component = (await callback()).default;
      return [url === 'vote' ? 'vota' : url, component];
    })
  )
);

export const routes = Object.keys(pages).reduce((acc: { [key: string]: any }, page) => {
  acc.push({
    params: { page },
    props: { entryPoint: page },
  });
return acc;
}, []);
---